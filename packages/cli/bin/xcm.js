#! /usr/bin/env node

(()=>{"use strict";var e={2793:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.print=void 0;const r=n(9889),o=n(4410);t.print=()=>{r.printLine(`Version ${o.Number}`),r.printLine("Syntax:   xcm [options]"),r.printLine(""),r.printLine("Examples: xcm -i source.xcm"),r.printLine("          xcm -i source.xcm -o parser.js"),r.printLine(""),r.printLine("Options:"),r.printLine("  -h, --help       Show this help."),r.printLine("  -v, --version    Print the version."),r.printLine("  -s, --source     Source file location (Default is stdin)."),r.printLine("  -t, --target     Target file location (Default is stdout)."),r.printLine("  --run            Run the resulting project in the target file."),r.printLine("  --tokens         Print a list containing all the resulting tokens."),r.printLine("  --symbols        Print a table containing all the resulting symbols."),r.printLine("  --nodes          Print a ternary tree containing all the resulting nodes."),r.printLine("")}},4247:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.perform=void 0;const r=n(5747),o=n(3440),s=n(1317),a=n(9747),u=n(2346),i=n(9889),c=n(9255),l={initialIdentity:0},d=(e,t)=>(i.printLine("Optimizing..."),s.Optimizer.consumeNodes(t,e)?(i.clearLine(),!0):(c.print(e.errors),!1)),f=(e,t)=>(i.printLine("Making..."),s.Maker.consumeNodes(t,e)?(i.clearLine(),!0):(c.print(e.errors),!1));t.perform=(e,t,n,p)=>{const m=r.readFileSync(e).toString(),h=new o.Context("maker");if(a.tokenize(s.Lexer,m,h,!n&&p.tokens)&&u.parse(s.Parser,h.tokens,h,!n&&p.symbols,!n&&p.nodes))if(n){const e=new s.Project(new s.LiveCoder,l);if(d(e,h.node)&&f(e,h.node))return((e,t,n)=>{const r=new o.Context("runner");a.tokenize(e.lexer,t,r,n.tokens)&&u.parse(e.parser,r.tokens,r,n.symbols,n.nodes)?i.printLine("Done!"):c.print(r.errors)})(e,r.readFileSync(t).toString(),p),!0}else{const e=new s.Project(new s.TextCoder,l);if(d(e,h.node)&&f(e,h.node))return((e,t)=>{r.writeFileSync(t,`const Core = require('@xcheme/core');\n${e.lexer}\n${e.parser}\n`),1!==t&&i.printLine("Done!")})(e,t),!0}return c.print(h.errors),!1}},4124:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.print=void 0;const r=n(4410);t.print=()=>{console.log(r.Number)}},9889:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.printLine=t.writeLine=t.clearLine=void 0,t.clearLine=()=>{process.stdout.isTTY&&(process.stdout.moveCursor(0,-1),process.stdout.clearLine(1))},t.writeLine=e=>{process.stdout.write(e)},t.printLine=e=>{process.stdout.write(`${e}\n`)}},9255:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.print=t.getMessage=void 0,n(1317);const r=n(9889),o={4096:"Duplicate identifier '{0}' at line {1}, column {2}.",4097:"Unexpected token '{0}' at line {1}, column {2}.",4098:"Unexpected syntax '{0}' at line {1}, column {2}.",4099:"Unexpected node '{0}' at line {1}, column {2}.",4100:"Unoptimized node '{0}' at line {1}, column {2}.",4101:"Undefined identifiers cannot be referenced, '{0}' at line {1}, column {2}.",4102:"Unresolved identifiers cannot be referenced, '{0}' at line {1}, column {2}.",4103:"Node reference cannot be in use here, '{0}' at line {1}, column {2}.",4104:"Token reference cannot be in use here, '{0}' at line {1}, column {2}.",4105:"Alias Node reference cannot be in use here, '{0}' at line {1}, column {2}.",4106:"Alias Token reference cannot be in use here, '{0}' at line {1}, column {2}.",4107:"Token reference is not resolved yet, '{0}' at line {1}, column {2}.",4108:"Multiple tokens with the same expression, '{0}' at line {1}, column {2}."};t.getMessage=e=>{const t=o[e.value];if(!t)throw`Error value ${e.value} is not supported.`;const n=e.fragment,r=n.location;return t.replace(/(\{[0-2]\})/g,(e=>{switch(e){case"{0}":return n.data.replace(/\n/g,"\\n");case"{1}":return(r.line+1).toString();case"{2}":return(r.column+1).toString()}return e}))},t.print=e=>{r.printLine("Errors:");for(const n of e)r.printLine(`  ${t.getMessage(n)}`);r.printLine("")}},2263:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLocation=t.getMessage=void 0,t.getMessage=e=>e.data.replace(/\n/g,"\\n"),t.getLocation=e=>{const t=e.location,n=t.line.toString(),r=t.column.toString();return`${n.padStart(4," ")}:${r.padEnd(4," ")}`}},9747:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tokenize=void 0;const r=n(3440),o=(n(1317),n(9889)),s=n(307);t.tokenize=(e,t,n,a)=>{const u=new r.TextSource(t,n);return o.printLine("Tokenizing..."),e.consume(u)?(o.clearLine(),a&&s.print(n.tokens),!0):(n.errors.push(new r.Error(u.fragment,4097)),!1)}},704:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.print=void 0;const r=n(9889),o=n(2263),s=(e,t,n,u,i)=>{const c=o.getMessage(n.fragment),l=o.getLocation(n.fragment),d=t?((e,t,n)=>"L"===e&&(t.right||t.next&&!n)||"R"===e&&t.next&&n||"N"===e&&t.next?.next&&!n?"├─ ":"└─ ")(e,t,i):"";r.printLine(` ${l} ${u}${d}${e} ${(e=>e.value.toString())(n)} "${c}"`),t&&(u+=((e,t,n)=>"L"===e&&(t.right||t.next&&!n)||"R"===e&&t.next&&n||"N"===e&&t.next?.next&&!n?"│  ":"   ")(e,t,i)),n.left&&s("L",n,n.left,u,!0),n.right&&s("R",n,n.right,u,!0),n.next&&i&&a(n,n,u)},a=(e,t,n)=>{for(;t=t.next;)s("N",e,t,n,!1),e&&(e=t)};t.print=e=>{r.printLine("Nodes:\n"),a(void 0,e,""),r.printLine("")}},4627:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFlags=void 0,t.getFlags=e=>{const t={debug:{}};for(let n=0;n<e.length;n++){const r=e[n];switch(r){case"-h":case"--help":return t.help=!0,t;case"-v":case"--version":return t.version=!0,t;case"-s":case"--source":t.source=e[++n];break;case"-t":case"--target":t.target=e[++n];break;case"--run":t.run=!0;break;case"--tokens":t.debug.tokens=!0;break;case"--symbols":t.debug.symbols=!0;break;case"--nodes":t.debug.nodes=!0;break;default:throw`Option '${r}' is not supported.`}}return t}},2346:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;const r=n(3440),o=(n(1317),n(9889)),s=n(9863),a=n(704);t.parse=(e,t,n,u,i)=>{const c=new r.TokenSource(t,n);if(o.printLine("Parsing..."),!e.consume(c)){const e=t[c.longestState.offset]?.fragment??c.fragment;return n.errors.push(new r.Error(e,4098)),!1}return o.clearLine(),u&&s.print(n.node),i&&a.print(n.node),!0}},9863:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.print=void 0;const r=n(9889),o=n(2263),s=e=>e.value.toString(),a=e=>{let t=1;for(;e=e.parent;)t++;return t.toString().padStart(3," ")},u=(e,t)=>{for(;e=e.next;){if(!t.has(e.table)){t.add(e.table);const n=(e.table.parent?"Inner":"Global").padEnd(7," "),u=a(e.table);for(const t of e.table.names){const a=e.table.get(t),i=o.getLocation(a.fragment);r.printLine(` ${i} ${n} ${u} ${s(a)} ${t}`)}}e.left&&u(e.left,t),e.right&&u(e.right,t),e.next&&u(e.next,t)}};t.print=e=>{r.printLine("Symbols:\n"),u(e,new Set),r.printLine("")}},307:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.print=void 0;const r=n(9889),o=n(2263),s=e=>`${e.value.toString().padStart(4,"0")}`;t.print=e=>{r.printLine("Tokens:");for(const t of e){const e=o.getLocation(t.fragment),n=o.getMessage(t.fragment);r.printLine(` ${e} ${s(t)} "${n}"`)}r.printLine("")}},4410:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Number=void 0;const r=n(4147);t.Number=r?.version??"0.0.0"},107:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1304),o=n(8134),s=n(3682),a=n(3260);t.default=class{#errors=[];#tokens=[];#table=new s.default;#node=new a.default(new r.default("",0,0,new o.default(0,0)),this.#table,0);#name;constructor(e){this.#name=e}get errors(){return this.#errors}get tokens(){return this.#tokens}get table(){return this.#table}get node(){return this.#node}get name(){return this.#name}}},6309:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{#fragment;#value;constructor(e,t){this.#fragment=e,this.#value=t}get fragment(){return this.#fragment}get value(){return this.#value}}},1304:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{#source;#begin;#end;#location;constructor(e,t,n,r){this.#source=e,this.#begin=t,this.#end=n,this.#location=r}get source(){return this.#source}get data(){return this.#source.substring(this.#begin,this.#end)}get begin(){return this.#begin}get end(){return this.#end}get location(){return this.#location}}},8134:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{#line;#column;constructor(e,t){this.#line=e,this.#column=t}get line(){return this.#line}get column(){return this.#column}}},3260:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{#children={};#fragment;#table;#value;constructor(e,t,n){this.#fragment=e,this.#table=t,this.#value=n}get fragment(){return this.#fragment}get table(){return this.#table}get value(){return this.#value}get left(){return this.#children[0]}get right(){return this.#children[1]}get next(){return this.#children[2]}getChild(e){return this.#children[e]}setChild(e,t){this.#children[e]=t}getLowestChild(e){let t,n=this;for(;n=n.getChild(e);)t=n;return t}}},9479:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{#fragment;#node;#value;constructor(e,t,n){this.#fragment=e,this.#node=t,this.#value=n}get fragment(){return this.#fragment}get node(){return this.#node}get value(){return this.#value}}},3682:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1304);t.default=class{#records={};#length=0;#parent;constructor(e){this.#parent=e}get parent(){return this.#parent}get names(){return Object.keys(this.#records)}get length(){return this.#length}has(e){return void 0!==this.get(e)}get(e){return this.#records[e instanceof r.default?e.data:e]}add(e){const t=e.fragment.data;if(this.#records[t])throw"Unable to add records with duplicate fragment data.";this.#records[t]=e,this.#length++}}},6111:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{#fragment;#value;constructor(e,t){this.#fragment=e,this.#value=t}get fragment(){return this.#fragment}get value(){return this.#value}}},3440:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScopeSymbolPattern=t.EmitSymbolPattern=t.EmitSymbolRoute=t.PlaceNodePattern=t.PivotNodePattern=t.PrependNodePattern=t.AppendNodePattern=t.EmitNodePattern=t.EmitNodeRoute=t.EmitTokenPattern=t.EmitTokenRoute=t.EmitErrorPattern=t.EmitErrorRoute=t.SetStatePattern=t.HasStatePattern=t.SetStateRoute=t.SetValuePattern=t.SetValueRoute=t.MapFlowPattern=t.StaticFlowPattern=t.RepeatFlowPattern=t.OptFlowPattern=t.NotFlowPattern=t.EndFlowPattern=t.ExpectFlowPattern=t.RunFlowPattern=t.ConditionFlowPattern=t.ChooseFlowPattern=t.FlowRoute=t.RangeUnitPattern=t.ExpectUnitPattern=t.ChooseUnitPattern=t.AnyUnitPattern=t.UnitRoute=t.TokenSource=t.TextSource=t.BaseSource=t.Route=t.Pattern=t.Location=t.Fragment=t.Record=t.Table=t.Token=t.Node=t.Error=t.Context=void 0;var r=n(107);Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return r.default}});var o=n(6309);Object.defineProperty(t,"Error",{enumerable:!0,get:function(){return o.default}});var s=n(3260);Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return s.default}});var a=n(6111);Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return a.default}});var u=n(3682);Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return u.default}});var i=n(9479);Object.defineProperty(t,"Record",{enumerable:!0,get:function(){return i.default}});var c=n(1304);Object.defineProperty(t,"Fragment",{enumerable:!0,get:function(){return c.default}});var l=n(8134);Object.defineProperty(t,"Location",{enumerable:!0,get:function(){return l.default}});var d=n(25);Object.defineProperty(t,"Pattern",{enumerable:!0,get:function(){return d.default}});var f=n(8531);Object.defineProperty(t,"Route",{enumerable:!0,get:function(){return f.default}});var p=n(2055);Object.defineProperty(t,"BaseSource",{enumerable:!0,get:function(){return p.default}});var m=n(4018);Object.defineProperty(t,"TextSource",{enumerable:!0,get:function(){return m.default}});var h=n(6470);Object.defineProperty(t,"TokenSource",{enumerable:!0,get:function(){return h.default}});var P=n(1197);Object.defineProperty(t,"UnitRoute",{enumerable:!0,get:function(){return P.default}});var g=n(5230);Object.defineProperty(t,"AnyUnitPattern",{enumerable:!0,get:function(){return g.default}});var w=n(5616);Object.defineProperty(t,"ChooseUnitPattern",{enumerable:!0,get:function(){return w.default}});var v=n(492);Object.defineProperty(t,"ExpectUnitPattern",{enumerable:!0,get:function(){return v.default}});var b=n(4964);Object.defineProperty(t,"RangeUnitPattern",{enumerable:!0,get:function(){return b.default}});var y=n(3757);Object.defineProperty(t,"FlowRoute",{enumerable:!0,get:function(){return y.default}});var _=n(3197);Object.defineProperty(t,"ChooseFlowPattern",{enumerable:!0,get:function(){return _.default}});var O=n(9500);Object.defineProperty(t,"ConditionFlowPattern",{enumerable:!0,get:function(){return O.default}});var x=n(9158);Object.defineProperty(t,"RunFlowPattern",{enumerable:!0,get:function(){return x.default}});var S=n(3523);Object.defineProperty(t,"ExpectFlowPattern",{enumerable:!0,get:function(){return S.default}});var E=n(4432);Object.defineProperty(t,"EndFlowPattern",{enumerable:!0,get:function(){return E.default}});var j=n(5702);Object.defineProperty(t,"NotFlowPattern",{enumerable:!0,get:function(){return j.default}});var M=n(3712);Object.defineProperty(t,"OptFlowPattern",{enumerable:!0,get:function(){return M.default}});var R=n(1032);Object.defineProperty(t,"RepeatFlowPattern",{enumerable:!0,get:function(){return R.default}});var F=n(3803);Object.defineProperty(t,"StaticFlowPattern",{enumerable:!0,get:function(){return F.default}});var k=n(7219);Object.defineProperty(t,"MapFlowPattern",{enumerable:!0,get:function(){return k.default}});var N=n(4309);Object.defineProperty(t,"SetValueRoute",{enumerable:!0,get:function(){return N.default}});var C=n(9382);Object.defineProperty(t,"SetValuePattern",{enumerable:!0,get:function(){return C.default}});var U=n(8136);Object.defineProperty(t,"SetStateRoute",{enumerable:!0,get:function(){return U.default}});var V=n(2437);Object.defineProperty(t,"HasStatePattern",{enumerable:!0,get:function(){return V.default}});var L=n(3429);Object.defineProperty(t,"SetStatePattern",{enumerable:!0,get:function(){return L.default}});var T=n(9087);Object.defineProperty(t,"EmitErrorRoute",{enumerable:!0,get:function(){return T.default}});var $=n(8296);Object.defineProperty(t,"EmitErrorPattern",{enumerable:!0,get:function(){return $.default}});var A=n(5664);Object.defineProperty(t,"EmitTokenRoute",{enumerable:!0,get:function(){return A.default}});var I=n(6739);Object.defineProperty(t,"EmitTokenPattern",{enumerable:!0,get:function(){return I.default}});var B=n(6552);Object.defineProperty(t,"EmitNodeRoute",{enumerable:!0,get:function(){return B.default}});var z=n(6429);Object.defineProperty(t,"EmitNodePattern",{enumerable:!0,get:function(){return z.default}});var H=n(8586);Object.defineProperty(t,"AppendNodePattern",{enumerable:!0,get:function(){return H.default}});var q=n(1653);Object.defineProperty(t,"PrependNodePattern",{enumerable:!0,get:function(){return q.default}});var D=n(1439);Object.defineProperty(t,"PivotNodePattern",{enumerable:!0,get:function(){return D.default}});var G=n(2137);Object.defineProperty(t,"PlaceNodePattern",{enumerable:!0,get:function(){return G.default}});var J=n(6040);Object.defineProperty(t,"EmitSymbolRoute",{enumerable:!0,get:function(){return J.default}});var K=n(4007);Object.defineProperty(t,"EmitSymbolPattern",{enumerable:!0,get:function(){return K.default}});var Y=n(9313);Object.defineProperty(t,"ScopeSymbolPattern",{enumerable:!0,get:function(){return Y.default}})},8296:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2055),o=n(6309),s=n(3523),a=n(25);class u extends a.default{#target;#value;constructor(e,...t){super(),this.#target=new s.default(...t),this.#value=e}consume(e){e.saveState();const t=this.#target.consume(e);if(t){const{value:t}=e.output,n=this.#value===r.default.Output?t??-1:this.#value,s=new o.default(e.fragment,n);e.emit(s)}return e.discardState(),t}}t.default=u},9087:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8531),o=n(25),s=n(8296);class a extends r.default{constructor(e,t,...n){t instanceof o.default?super(new s.default(e,t),n[0],...n.splice(1)):super(new s.default(e),t,...n)}}t.default=a},3197:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),o=n(8162);class s extends r.default{#targets;constructor(...e){super(),this.#targets=e.map((e=>new o.default(e)))}consume(e){for(const t of this.#targets)if(t.consume(e))return!0;return!1}}t.default=s},9500:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),o=n(8162);class s extends r.default{#test;#success;#failure;constructor(e,t,n){super(),this.#test=new o.default(e),this.#success=t,this.#failure=n}consume(e){return this.#test.consume(e)?this.#success.consume(e):!!this.#failure&&this.#failure.consume(e)}}t.default=s},4432:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25);class o extends r.default{consume(e){return 0===e.length}}t.default=o},3523:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25);class o extends r.default{#targets;constructor(...e){super(),this.#targets=e}consume(e){for(const t of this.#targets)if(!t.consume(e))return!1;return!0}}t.default=o},7219:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25);class o extends r.default{#root;#compare(e,t){return("string"==typeof e?e.charCodeAt(0):e)-("string"==typeof t?t.charCodeAt(0):t)}#getNode(e){let t,n=this.#root;for(let r=0;r<e.length;){if(!n)return;const o=this.#compare(n.value,e[r]);o<0?n=n.left:o>0?n=n.right:(t=n,n=n.next,r++)}return t}#setNode(e){let t=this.#root,n=t,r=t,o=0;for(let s=0;s<e.length;){if(t){if(o=this.#compare(t.value,e[s]),o<0){n=t,t=t.left;continue}if(o>0){n=t,t=t.right;continue}}else{const r={value:e[s]};n?(o<0?n.left=t=r:o>0?n.right=t=r:n.next=t=r,o=0):this.#root=n=t=r}r=t,n=t,t=t.next,s++}return r}#findNode(e,t){for(e.saveState();e.length>0&&void 0!==t;){const n=this.#compare(t.value,e.value);if(n<0)t=t.left;else if(n>0)t=t.right;else{if(void 0!==t.pattern)return e.discardState(),t;e.nextState(),t=t.next}}e.restoreState(),e.discardState()}#getLongestConsumptionNode(e){let t,n=this.#root;for(;void 0!==(n=this.#findNode(e,n));)t=n,n=n.next,e.nextState();return t}constructor(...e){super();for(const t of e){const e=this.#getNode(t.units)??this.#setNode(t.units);e&&(e.pattern=t.pattern)}}consume(e){const t=this.#getLongestConsumptionNode(e);return void 0!==t&&(!t.pattern||t.pattern.consume(e))}}t.default=o},5702:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),o=n(8162);class s extends r.default{#target;constructor(...e){super(),this.#target=new o.default(...e)}consume(e){return e.length>0&&!this.#target.consume(e)}}t.default=s},3712:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),o=n(8162);class s extends r.default{#target;constructor(...e){super(),this.#target=new o.default(...e)}consume(e){return this.#target.consume(e),!0}}t.default=s},1032:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),o=n(3523),s=n(8162);class a extends r.default{#target;#triable;constructor(...e){super(),this.#target=new o.default(...e),this.#triable=new s.default(this.#target)}consume(e){if(this.#target.consume(e)){for(;this.#triable.consume(e););return!0}return!1}}t.default=a},3757:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8531);class o extends r.default{constructor(e,t,...n){super(e,t,...n)}}t.default=o},9158:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25);class o extends r.default{#callback;constructor(e){super(),this.#callback=e}consume(e){return this.#callback().consume(e)}}t.default=o},3803:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25);class o extends r.default{#value;constructor(e){super(),this.#value=e}consume(e){return this.#value}}t.default=o},8162:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),o=n(3523);class s extends r.default{#target;constructor(...e){super(),this.#target=new o.default(...e)}consume(e){e.saveState();const t=this.#target.consume(e);return t||e.restoreState(),e.discardState(),t}}t.default=s},8586:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2055),o=n(3260),s=n(3523),a=n(25);class u extends a.default{#head;#target;#value;#output;#current;constructor(e,t,n,r,...o){super(),this.#head=r,this.#target=new s.default(...o),this.#value=e,this.#output=t,this.#current=n}consume(e){e.saveState();const t=e.output;let n=t.node;t.node=void 0;let s=this.#head.consume(e);if(s){const a=e.fragment;if(s=this.#target.consume(e)){const{table:e,value:s}=t,u=this.#value===r.default.Output?s??-1:this.#value,i=new o.default(a,e,u);i.setChild(this.#output,t.node),n?(n.getLowestChild(this.#current)??n).setChild(this.#current,i):n=i}}return t.node=n,e.discardState(),s}}t.default=u},6429:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2055),o=n(3260),s=n(3523),a=n(25);class u extends a.default{#target;#value;#output;constructor(e,t,...n){super(),this.#target=new s.default(...n),this.#value=e,this.#output=t}consume(e){e.saveState();const t=this.#target.consume(e);if(t){const{table:t,value:n}=e.output,s=this.#value===r.default.Output?n??-1:this.#value,a=new o.default(e.fragment,t,s);a.setChild(this.#output,e.output.node),e.output.node=void 0,e.emit(a)}return e.discardState(),t}}t.default=u},1439:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2055),o=n(3260),s=n(3523),a=n(25);class u extends a.default{#head;#target;#value;#output;#current;constructor(e,t,n,r,...o){if(super(),n===t)throw"Current and Output destinations can't have the same value.";this.#head=r,this.#target=new s.default(...o),this.#value=e,this.#output=t,this.#current=n}consume(e){e.saveState();let t=this.#head.consume(e);if(t){const n=e.output,{table:s,value:a}=n,u=e.fragment,i=n.node;if(n.node=void 0,t=this.#target.consume(e)){const e=this.#value===r.default.Output?a??-1:this.#value,t=new o.default(u,s,e);t.setChild(this.#output,n.node),t.setChild(this.#current,i),n.node=t}else n.node=i}return e.discardState(),t}}t.default=u},2137:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),o=n(3523);class s extends r.default{#target;#current;constructor(e,...t){super(),this.#target=new o.default(...t),this.#current=e}consume(e){const t=e.output;let n=t.node;t.node=void 0;const r=this.#target.consume(e),o=t.node;return r&&o&&(n?(n.getLowestChild(this.#current)??n).setChild(this.#current,o):n=o),t.node=n,r}}t.default=s},1653:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2055),o=n(3260),s=n(3523),a=n(25);class u extends a.default{#head;#target;#value;#output;#current;constructor(e,t,n,r,...o){super(),this.#head=r,this.#target=new s.default(...o),this.#value=e,this.#output=t,this.#current=n}consume(e){e.saveState();const t=e.output;let n=t.node;t.node=void 0;let s=this.#head.consume(e);if(s){const a=e.fragment;if(s=this.#target.consume(e)){const{table:e,value:s}=t,u=this.#value===r.default.Output?s??-1:this.#value,i=new o.default(a,e,u);i.setChild(this.#output,t.node),n&&(i.getLowestChild(this.#current)??i).setChild(this.#current,n),n=i}}return t.node=n,e.discardState(),s}}t.default=u},6552:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8531),o=n(25),s=n(6429);class a extends r.default{constructor(e,t,n,...r){n instanceof o.default?super(new s.default(e,t,n),r[0],...r.splice(1)):super(new s.default(e,t),n,...r)}}t.default=a},25:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{consume(e){throw"Consume method doesn't implemented."}}},8531:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{#pattern;#units;constructor(e,t,...n){this.#pattern=e,this.#units=[t,...n]}get pattern(){return this.#pattern}get units(){return this.#units}}},2437:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3523),o=n(25);class s extends o.default{#target;#value;constructor(e,...t){super(),this.#target=new r.default(...t),this.#value=e}consume(e){return e.output.state===this.#value&&this.#target.consume(e)}}t.default=s},8136:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8531),o=n(25),s=n(3429);class a extends r.default{constructor(e,t,...n){t instanceof o.default?super(new s.default(e,t),n[0],...n.splice(1)):super(new s.default(e),t,...n)}}t.default=a},3429:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3523),o=n(25);class s extends o.default{#target;#value;constructor(e,...t){super(),this.#target=new r.default(...t),this.#value=e}consume(e){return!!this.#target.consume(e)&&(e.output.state=this.#value,!0)}}t.default=s},4007:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2055),o=n(9479),s=n(25),a=n(3523),u=n(6309);class i extends s.default{#test;#target;#value;constructor(e,t,...n){super(),this.#test=t,this.#target=new a.default(...n),this.#value=e}consume(e){e.saveState();let t=this.#test.consume(e);if(t){const{node:n,table:s,value:a}=e.output,i=e.fragment;if(t=this.#target.consume(e))if(s.has(i)){const t=new u.default(i,4096);e.emit(t)}else{const t=this.#value===r.default.Output?a??-1:this.#value,s=new o.default(i,n,t);e.emit(s)}}return e.discardState(),t}}t.default=i},6040:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8531),o=n(25),s=n(4007);class a extends r.default{constructor(e,t,n,...r){n instanceof o.default?super(new s.default(e,t,n),r[0],...r.splice(1)):super(new s.default(e,t),n,...r)}}t.default=a},9313:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25),o=n(3523);class s extends r.default{#target;constructor(...e){super(),this.#target=new o.default(...e)}consume(e){e.openTable();const t=this.#target.consume(e);return e.closeTable(),t}}t.default=s},6739:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2055),o=n(6111),s=n(3523),a=n(25);class u extends a.default{#target;#value;constructor(e,...t){super(),this.#target=new s.default(...t),this.#value=e}consume(e){e.saveState();const t=this.#target.consume(e);if(t){const{value:t}=e.output,n=this.#value===r.default.Output?t??-1:this.#value,s=new o.default(e.fragment,n);e.emit(s)}return e.discardState(),t}}t.default=u},5664:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8531),o=n(25),s=n(6739);class a extends r.default{constructor(e,t,...n){t instanceof o.default?super(new s.default(e,t),n[0],...n.slice(1)):super(new s.default(e),t,...n)}}t.default=a},5230:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25);class o extends r.default{consume(e){return e.length>0&&(e.nextState(),!0)}}t.default=o},5616:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25);class o extends r.default{#units;constructor(...e){super(),this.#units=new Set(e)}consume(e){return!!(e.length>0&&this.#units.has(e.value))&&(e.nextState(),!0)}}t.default=o},492:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25);class o extends r.default{#units;constructor(...e){super(),this.#units=e}consume(e){for(const t of this.#units){if(0===e.length||e.value!==t)return!1;e.nextState()}return!0}}t.default=o},4964:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(25);class o extends r.default{#begin;#end;constructor(e,t){super(),this.#begin=e,this.#end=t}consume(e){if(e.length>0){const t=e.value;if(t>=this.#begin&&t<=this.#end)return e.nextState(),!0}return!1}}t.default=o},1197:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8531);class o extends r.default{constructor(e,...t){super(null,e,...t)}}t.default=o},4309:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8531),o=n(25),s=n(9382);class a extends r.default{constructor(e,t,...n){t instanceof o.default?super(new s.default(e,t),n[0],...n.slice(1)):super(new s.default(e),t,...n)}}t.default=a},9382:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3523),o=n(25);class s extends o.default{#target;#value;constructor(e,...t){super(),this.#target=new r.default(...t),this.#value=e}consume(e){return!!this.#target.consume(e)&&(e.output.value=this.#value,!0)}}t.default=s},2055:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6309),o=n(6111),s=n(3260),a=n(9479),u=n(3682);t.default=class{#context;#table;#output;static get Output(){return 4294967295}constructor(e){this.#context=e,this.#table=e.table,this.#output={state:0,table:this.#table}}get output(){return this.#output}get offset(){throw"Property doesn't implemented."}get length(){throw"Property doesn't implemented."}get value(){throw"Property doesn't implemented."}get fragment(){throw"Property doesn't implemented."}saveState(){throw"Method doesn't implemented."}restoreState(){throw"Method doesn't implemented."}discardState(){throw"Method doesn't implemented."}nextState(){throw"Move method doesn't implemented."}emit(e){if(e instanceof r.default)this.#context.errors.push(e);else if(e instanceof o.default)this.#context.tokens.push(e);else if(e instanceof s.default)(this.#context.node.getLowestChild(2)??this.#context.node).setChild(2,e);else{if(!(e instanceof a.default))throw"Unsupported product type.";this.#table.add(e)}}openTable(){this.#table=new u.default(this.#table),this.#output.table=this.#table}closeTable(){if(!this.#table.parent)throw"There's no parent symbol table to collapse.";this.#table=this.#table.parent,this.#output.table=this.#table}}},4018:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1304),o=n(8134),s=n(2055);class a extends s.default{#data;#states=[];#current={line:0,column:0,offset:0};#longest={...this.#current};constructor(e,t){super(t),this.#data=e}get offset(){return this.#current.offset}get length(){return this.#data.length-this.offset}get value(){const e=this.#data[this.offset];if(void 0===e)throw"There's no value to get.";return e}get fragment(){if(this.#states.length>0){const e=this.#states[this.#states.length-1];if(this.offset>e.offset){const t=new o.default(e.line,e.column);return new r.default(this.#data,e.offset,this.offset,t)}}const e=this.offset+(this.length>0?1:0),t=new o.default(this.#current.line,this.#current.column);return new r.default(this.#data,this.offset,e,t)}get currentState(){return this.#current}get longestState(){return this.#longest}saveState(){this.#states.push({...this.#current})}restoreState(){if(void 0===(this.#current=this.#states[this.#states.length-1]))throw"There's no state to restore."}discardState(){this.#states.pop()}nextState(){"\n"!==this.value?this.#current.column++:(this.#current.column=0,this.#current.line++),this.#current.offset++,this.#current.offset>this.#longest.offset&&(this.#longest={...this.#current})}}t.default=a},6470:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1304),o=n(2055);class s extends o.default{#data;#states=[];#current={offset:0};#longest={...this.#current};constructor(e,t){super(t),this.#data=e}get offset(){return this.#current.offset}get length(){return this.#data.length-this.offset}get value(){const e=this.#data[this.offset];if(void 0===e)throw"There's no value to get.";return e.value}get fragment(){if(this.#states.length>0){const e=this.#states[this.#states.length-1];if(this.offset>e.offset){const t=this.#data[e.offset].fragment,n=this.#data[Math.max(0,this.offset-1)].fragment;return new r.default(t.source,t.begin,n.end,t.location)}}const e=Math.min(this.offset,this.#data.length-1);return this.#data[e].fragment}get currentState(){return this.#current}get longestState(){return this.#longest}saveState(){this.#states.push({...this.#current})}restoreState(){if(void 0===(this.#current=this.#states[this.#states.length-1]))throw"There's no state to restore."}discardState(){this.#states.pop()}nextState(){this.#current.offset++,this.#current.offset>this.#longest.offset&&(this.#longest={...this.#current})}}t.default=s},9897:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Aggregator=void 0,t.Aggregator=class{#map={};get patterns(){return Object.values(this.#map).filter((e=>0===e.type))}get aliasPatterns(){return Object.values(this.#map).filter((e=>1===e.type))}has(e){return void 0!==this.#map[e]}get(e){return this.#map[e]}add(e,t,n,r){if(this.#map[t])throw`Pattern entry '${t}' already exists.`;this.#map[t]={type:e,name:t,identity:n,pattern:r}}}},3842:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Project=void 0;const r=n(9897);t.Project=class{#coder;#options;#errors=[];#skipEntries=new r.Aggregator;#tokenEntries=new r.Aggregator;#tokenPointerEntries=new r.Aggregator;#nodeEntries=new r.Aggregator;#nodePointerEntries=new r.Aggregator;#getPatterns(e){return e.map((e=>e.pattern))}#getPointers(e){return e.patterns.map((e=>({name:e.name,pattern:e.pattern})))}constructor(e,t={}){this.#coder=e,this.#options=t}get coder(){return this.#coder}get options(){return this.#options}get errors(){return this.#errors}get skipEntries(){return this.#skipEntries}get tokenEntries(){return this.#tokenEntries}get tokenPointerEntries(){return this.#tokenPointerEntries}get nodeEntries(){return this.#nodeEntries}get nodePointerEntries(){return this.#nodePointerEntries}get lexer(){return this.#coder.getEntry("Lexer",this.#getPointers(this.#tokenPointerEntries),...this.#getPatterns(this.#skipEntries.patterns),...this.#getPatterns(this.#tokenEntries.patterns))}get parser(){return this.#coder.getEntry("Parser",this.#getPointers(this.#nodePointerEntries),...this.#getPatterns(this.#nodeEntries.patterns))}}},3772:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compose=t.extract=void 0;const n=["\\\\","\\t","\\v","\\f","\\r","\\n","\\'"],r=new RegExp(`(?:${n.join("|")})`,"g"),o=new RegExp(`(?:${n.join("|").replaceAll("\\","\\\\")})`,"g");t.extract=e=>(e=>e.replace(o,(e=>{switch(e){case"\\\\":return"\\";case"\\t":return"\t";case"\\v":return"\v";case"\\f":return"\f";case"\\r":return"\r";case"\\n":return"\n";case"\\'":return"'"}return e})))(e.substring(1,e.length-1)),t.compose=e=>{return`'${t=e,t.replace(r,(e=>{switch(e){case"\\":return"\\\\";case"\t":return"\\t";case"\v":return"\\v";case"\f":return"\\f";case"\r":return"\\r";case"\n":return"\\n";case"'":return"\\'"}return e}))}'`;var t}},1317:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Project=t.TextCoder=t.LiveCoder=t.BaseCoder=t.Maker=t.Optimizer=t.Parser=t.Lexer=void 0,t.Lexer=n(5987),t.Parser=n(2536),t.Optimizer=n(6017),t.Maker=n(181);var r=n(509);Object.defineProperty(t,"BaseCoder",{enumerable:!0,get:function(){return r.Base}});var o=n(4162);Object.defineProperty(t,"LiveCoder",{enumerable:!0,get:function(){return o.Live}});var s=n(1010);Object.defineProperty(t,"TextCoder",{enumerable:!0,get:function(){return s.Text}});var a=n(3842);Object.defineProperty(t,"Project",{enumerable:!0,get:function(){return a.Project}})},5987:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=t.consumeText=void 0;const r=n(3440),o=n(7639);t.consumeText=(e,t)=>{const n=new r.TextSource(e,t);return!!o.Program.consume(n)||(t.errors.push(new r.Error(n.fragment,4097)),!1)},t.consume=e=>o.Program.consume(e)},7639:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Program=void 0;const r=n(3440),o=new r.ChooseUnitPattern(" ","\t","\v","\f","\r","\n"),s=new r.ExpectFlowPattern(new r.ExpectUnitPattern("/","/"),new r.OptFlowPattern(new r.RepeatFlowPattern(new r.ConditionFlowPattern(new r.NotFlowPattern(new r.ExpectUnitPattern("\n")),new r.AnyUnitPattern)))),a=new r.ExpectFlowPattern(new r.ExpectUnitPattern("/","*"),new r.OptFlowPattern(new r.RepeatFlowPattern(new r.ConditionFlowPattern(new r.NotFlowPattern(new r.ExpectUnitPattern("*","/")),new r.AnyUnitPattern))),new r.ExpectUnitPattern("*","/")),u=new r.ChooseFlowPattern(new r.RangeUnitPattern("a","z"),new r.RangeUnitPattern("A","Z")),i=new r.RangeUnitPattern("0","9"),c=new r.ExpectUnitPattern("_"),l=new r.ChooseFlowPattern(u,i,c),d=new r.NotFlowPattern(l),f=new r.MapFlowPattern(new r.SetValueRoute(103,d,"a","n","y"),new r.SetValueRoute(104,d,"f","r","o","m"),new r.SetValueRoute(105,d,"t","o"),new r.SetValueRoute(110,d,"n","o","t"),new r.SetValueRoute(111,d,"o","p","t"),new r.SetValueRoute(112,d,"r","e","p","e","a","t"),new r.SetValueRoute(113,d,"p","l","a","c","e"),new r.SetValueRoute(116,d,"p","i","v","o","t"),new r.SetValueRoute(114,d,"a","p","p","e","n","d"),new r.SetValueRoute(115,d,"p","r","e","p","e","n","d"),new r.SetValueRoute(117,d,"n","e","x","t"),new r.SetValueRoute(118,d,"l","e","f","t"),new r.SetValueRoute(119,d,"r","i","g","h","t"),new r.SetValueRoute(120,d,"s","y","m","b","o","l"),new r.SetValueRoute(121,d,"s","c","o","p","e"),new r.SetValueRoute(122,d,"e","r","r","o","r"),new r.SetValueRoute(123,d,"h","a","s"),new r.SetValueRoute(124,d,"s","e","t"),new r.SetValueRoute(108,d,"o","r"),new r.SetValueRoute(109,d,"a","n","d"),new r.SetValueRoute(106,d,"t","h","e","n"),new r.SetValueRoute(107,d,"e","l","s","e"),new r.SetValueRoute(125,d,"s","k","i","p"),new r.SetValueRoute(128,d,"a","l","i","a","s"),new r.SetValueRoute(126,d,"t","o","k","e","n"),new r.SetValueRoute(127,d,"n","o","d","e"),new r.SetValueRoute(129,d,"a","s"),new r.SetValueRoute(103,"*"),new r.SetValueRoute(108,"|"),new r.SetValueRoute(109,"&"),new r.SetValueRoute(130,";"),new r.SetValueRoute(131,"("),new r.SetValueRoute(132,")"),new r.SetValueRoute(133,"<"),new r.SetValueRoute(134,">")),p=new r.SetValuePattern(101,new r.ChooseFlowPattern(new r.ExpectUnitPattern("0"),new r.ExpectFlowPattern(new r.RangeUnitPattern("1","9"),new r.OptFlowPattern(new r.RepeatFlowPattern(i))))),m=new r.SetValuePattern(102,new r.ExpectUnitPattern("'"),new r.RepeatFlowPattern(new r.ConditionFlowPattern(new r.ExpectUnitPattern("\\"),new r.AnyUnitPattern,new r.ConditionFlowPattern(new r.NotFlowPattern(new r.ExpectUnitPattern("'")),new r.AnyUnitPattern))),new r.ExpectUnitPattern("'")),h=new r.SetValuePattern(100,new r.ChooseFlowPattern(u,c),new r.OptFlowPattern(new r.RepeatFlowPattern(l)));t.Program=new r.ExpectFlowPattern(new r.OptFlowPattern(new r.RepeatFlowPattern(new r.ChooseFlowPattern(o,s,a,new r.EmitTokenPattern(r.TextSource.Output,new r.ChooseFlowPattern(f,p,m,h))))),new r.EndFlowPattern)},509:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0,t.Base=class{getEntry(e,t,...n){throw"Method doesn't implemented."}getRoute(e,t){throw"Method doesn't implemented."}emitMapPattern(...e){throw"Method doesn't implemented."}emitTokenPattern(e,...t){throw"Method doesn't implemented."}emitNodePattern(e,t,...n){throw"Method doesn't implemented."}emitConditionPattern(e,t,n){throw"Method doesn't implemented."}emitChoosePattern(...e){throw"Method doesn't implemented."}emitChooseUnitsPattern(e){throw"Method doesn't implemented."}emitExpectPattern(...e){throw"Method doesn't implemented."}emitExpectUnitsPattern(e){throw"Method doesn't implemented."}emitNotPattern(...e){throw"Method doesn't implemented."}emitOptPattern(...e){throw"Method doesn't implemented."}emitRepeatPattern(...e){throw"Method doesn't implemented."}emitPlacePattern(e,...t){throw"Method doesn't implemented."}emitAppendPattern(e,t,n,...r){throw"Method doesn't implemented."}emitPrependPattern(e,t,n,...r){throw"Method doesn't implemented."}emitPivotPattern(e,t,...n){throw"Method doesn't implemented."}emitSymbolPattern(e,t,...n){throw"Method doesn't implemented."}emitScopePattern(...e){throw"Method doesn't implemented."}emitErrorPattern(e,...t){throw"Method doesn't implemented."}emiHasPattern(e,...t){throw"Method doesn't implemented."}emitSetPattern(e,...t){throw"Method doesn't implemented."}emitReferencePattern(e,t){throw"Method doesn't implemented."}emitAnyPattern(){throw"Method doesn't implemented."}emitRangePattern(e,t){throw"Method doesn't implemented."}}},4162:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Live=void 0;const r=n(3440),o=n(509);class s extends o.Base{getEntry(e,t,...n){return new r.ExpectFlowPattern(new r.OptFlowPattern(new r.RepeatFlowPattern(new r.ChooseFlowPattern(...n))),new r.EndFlowPattern)}getRoute(e,t){return t?new r.SetValueRoute(t,e[0],...e.slice(1)):new r.UnitRoute(e[0],...e.slice(1))}emitMapPattern(...e){return new r.MapFlowPattern(...e)}emitTokenPattern(e,...t){return new r.EmitTokenPattern(e,...t)}emitNodePattern(e,t,...n){return new r.EmitNodePattern(e,t,...n)}emitConditionPattern(e,t,n){return new r.ConditionFlowPattern(e,t,n)}emitChoosePattern(...e){return new r.ChooseFlowPattern(...e)}emitChooseUnitsPattern(e){return new r.ChooseUnitPattern(...e)}emitExpectPattern(...e){return new r.ExpectFlowPattern(...e)}emitExpectUnitsPattern(e){return new r.ExpectUnitPattern(...e)}emitNotPattern(...e){return new r.NotFlowPattern(...e)}emitOptPattern(...e){return new r.OptFlowPattern(...e)}emitRepeatPattern(...e){return new r.RepeatFlowPattern(...e)}emitPlacePattern(e,...t){return new r.PlaceNodePattern(e,...t)}emitAppendPattern(e,t,n,...o){return new r.AppendNodePattern(e,1,t,n,...o)}emitPrependPattern(e,t,n,...o){return new r.PrependNodePattern(e,1,t,n,...o)}emitPivotPattern(e,t,...n){return new r.PivotNodePattern(e,1,0,t,...n)}emitSymbolPattern(e,t,...n){return new r.EmitSymbolPattern(e,t,...n)}emitScopePattern(...e){return new r.ScopeSymbolPattern(...e)}emitErrorPattern(e,...t){return new r.EmitErrorPattern(e,...t)}emiHasPattern(e,...t){return new r.HasStatePattern(e,...t)}emitSetPattern(e,...t){return new r.SetStatePattern(e,...t)}emitReferencePattern(e,t){const n=e.get(t);return n?n.pattern:new r.RunFlowPattern((()=>e.get(t).pattern))}emitAnyPattern(){return new r.AnyUnitPattern}emitRangePattern(e,t){return new r.RangeUnitPattern(e,t)}}t.Live=s},1010:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0,n(3440);const r=n(3772),o=n(509);class s extends o.Base{#getUnits(e){return e.map((e=>"number"!=typeof e?r.compose(e):e))}#getPattern(e,...t){return`new Core.${e}(${t.join(", ")})`}#getPointerEntry(e,t){return`const ${e} = ${t};`}#getExportEntry(e,t){return`exports.${e} = ${t};`}getEntry(e,t,...n){return t.map((e=>this.#getPointerEntry(e.name,e.pattern))).join("")+this.#getExportEntry(e,this.#getPattern("ExpectFlowPattern",this.#getPattern("OptFlowPattern",this.#getPattern("RepeatFlowPattern",this.#getPattern("ChooseFlowPattern",...n))),this.#getPattern("EndFlowPattern")))}getRoute(e,t){return t?this.#getPattern("SetValueRoute",t,...this.#getUnits(e)):this.#getPattern("UnitRoute",...this.#getUnits(e))}emitMapPattern(...e){return this.#getPattern("MapFlowPattern",...e)}emitTokenPattern(e,...t){return this.#getPattern("EmitTokenPattern",e,...t)}emitNodePattern(e,t,...n){return this.#getPattern("EmitNodePattern",e,t,...n)}emitConditionPattern(e,t,n){return this.#getPattern("ConditionFlowPattern",...n?[e,t,n]:[e,t])}emitChoosePattern(...e){return this.#getPattern("ChooseFlowPattern",...e)}emitChooseUnitsPattern(e){return this.#getPattern("ChooseUnitPattern",...this.#getUnits(e))}emitExpectPattern(...e){return this.#getPattern("ExpectFlowPattern",...e)}emitExpectUnitsPattern(e){return this.#getPattern("ExpectUnitPattern",...this.#getUnits(e))}emitNotPattern(...e){return this.#getPattern("NotFlowPattern",...e)}emitOptPattern(...e){return this.#getPattern("OptFlowPattern",...e)}emitRepeatPattern(...e){return this.#getPattern("RepeatFlowPattern",...e)}emitPlacePattern(e,...t){return this.#getPattern("PlaceNodePattern",e,...t)}emitAppendPattern(e,t,n,...r){return this.#getPattern("AppendNodePattern",e,1,t,n,...r)}emitPrependPattern(e,t,n,...r){return this.#getPattern("PrependNodePattern",e,1,t,n,...r)}emitPivotPattern(e,t,...n){return this.#getPattern("PivotNodePattern",e,1,0,t,...n)}emitSymbolPattern(e,t,...n){return this.#getPattern("EmitSymbolPattern",e,t,...n)}emitScopePattern(...e){return this.#getPattern("ScopeSymbolPattern",...e)}emitErrorPattern(e,...t){return this.#getPattern("EmitErrorPattern",e,...t)}emiHasPattern(e,...t){return this.#getPattern("HasStatePattern",e,...t)}emitSetPattern(e,...t){return this.#getPattern("SetStatePattern",e,...t)}emitReferencePattern(e,t){return e.has(t)?t:this.#getPattern("RunFlowPattern",`() => ${t}`)}emitAnyPattern(){return this.#getPattern("AnyUnitPattern")}emitRangePattern(e,t){return this.#getPattern("RangeUnitPattern",...this.#getUnits([e,t]))}}t.Text=s},181:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consumeNodes=void 0;const r=n(3440),o=(n(2536),n(5814)),s=n(6749),a=n(9548),u=n(1017);t.consumeNodes=(e,t)=>{const n=new Set;for(;void 0!==(e=e.next);)if(231===e.value)e instanceof o.Node?s.consume(t,e,n):t.errors.push(new r.Error(e.fragment,4099));else{const s=e.right;if(s instanceof o.Node)switch(e.value){case 232:a.consume(t,s,n,!1);break;case 233:u.consume(t,s,n,!1);break;case 234:a.consume(t,s,n,!0);break;case 235:u.consume(t,s,n,!0);break;default:t.errors.push(new r.Error(s.fragment,4099))}else t.errors.push(new r.Error(e.fragment,4099))}return 0===t.errors.length}},2735:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=t.resolve=void 0;const r=n(3772),o=n(2114),s=(n(2536),n(354));t.resolve=(e,n,a)=>{if(209!==n.value){const t=s.consume(e,n,a);if(void 0!==t)return[t]}else{if(n instanceof o.Node){let t;return t=203===n.type?n.sequence.map((e=>r.extract(e.fragment.data))).join("").split(""):n.sequence.map((e=>e.identity)),[e.coder.emitExpectUnitsPattern(t)]}{const r=t.resolve(e,n.left,a);if(void 0!==r){const o=t.resolve(e,n.right,a);if(void 0!==o)return[...r,...o]}}}},t.consume=(e,n,r)=>{const o=t.resolve(e,n,r);if(void 0!==o)return o.length>1?e.coder.emitExpectPattern(...o):o[0]}},3441:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n,o)=>{const s=r.resolve(e,t.right,n);if(void 0!==s)return e.coder.emitAppendPattern(n.identity,o,s[0],...s.slice(1))}},4339:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0,n(2536);const r=n(354);t.consume=(e,t,n)=>{const o=r.consume(e,t.left,n);if(void 0!==o){const s=t.right;if(207===s.value){const t=r.consume(e,s.left,n);if(void 0!==t){const a=r.consume(e,s.right,n);if(void 0!==a)return e.coder.emitConditionPattern(o,t,a)}}else{const t=r.consume(e,s,n);if(void 0!==t)return e.coder.emitConditionPattern(o,t)}}}},3010:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n)=>{const o=t.right,s=r.resolve(e,o.right,n);if(void 0!==s){const t=parseInt(o.fragment.data);return e.coder.emitErrorPattern(t,...s)}}},354:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(3440),o=(n(2536),n(4339)),s=n(8929),a=n(2735),u=n(2303),i=n(766),c=n(1056),l=n(2914),d=n(6490),f=n(3441),p=n(8253),m=n(1594),h=n(8040),P=n(3010),g=n(1636),w=n(4940),v=n(7698),b=n(3445),y=n(2862);t.consume=(e,t,n)=>{switch(t.value){case 201:return v.consume(e,t,n);case 203:return y.consume(e,t,n);case 204:return e.coder.emitAnyPattern();case 205:return b.consume(e,t,n);case 206:return o.consume(e,t,n);case 208:return s.consume(e,t,n);case 209:return a.consume(e,t,n);case 210:return u.consume(e,t,n);case 211:return i.consume(e,t,n);case 212:return c.consume(e,t,n);case 216:case 215:return l.consume(e,t,n,1);case 213:return l.consume(e,t,n,2);case 214:return l.consume(e,t,n,0);case 220:case 219:return f.consume(e,t,n,1);case 217:return f.consume(e,t,n,2);case 218:return f.consume(e,t,n,0);case 224:case 223:return p.consume(e,t,n,1);case 221:return p.consume(e,t,n,2);case 222:return p.consume(e,t,n,0);case 225:return d.consume(e,t,n);case 226:return m.consume(e,t,n);case 227:return h.consume(e,t,n);case 228:return P.consume(e,t,n);case 229:return g.consume(e,t,n);case 230:return w.consume(e,t,n);default:e.errors.push(new r.Error(t.fragment,4099))}}},1636:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n)=>{const o=t.right,s=r.resolve(e,o.right,n);if(void 0!==s){const t=parseInt(o.fragment.data);return e.coder.emiHasPattern(t,...s)}}},1017:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0,n(3440);const r=n(354),o=(e,t,n,r,o,s)=>{if(s){const s=e.coder.emitReferencePattern(e.nodePointerEntries,n);e.nodePointerEntries.add(0,n,r,o),e.nodeEntries.add(t,n,r,s)}else e.nodeEntries.add(t,n,r,o)};t.consume=(e,t,n,s)=>{const a=t.identity,u={type:2,identity:a,pointers:n},i=r.consume(e,t.right,u);if(void 0!==i){const r=t.fragment.data,u=n.has(r);if(s)o(e,1,r,a,i,u);else{const t=e.coder.emitNodePattern(a,1,i);o(e,0,r,a,t,u)}}}},2303:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n)=>{const o=r.resolve(e,t.right,n);if(void 0!==o)return e.coder.emitNotPattern(...o)}},766:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n)=>{const o=r.resolve(e,t.right,n);if(void 0!==o)return e.coder.emitOptPattern(...o)}},8929:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=t.resolve=void 0;const r=n(3772),o=n(2114),s=(n(2536),n(354));t.resolve=(e,n,a)=>{if(208!==n.value){const t=s.consume(e,n,a);if(void 0!==t)return[t]}else{if(n instanceof o.Node){if(203===n.type){const t=n.sequence.map((e=>r.extract(e.fragment.data)));if(t.length>3||void 0!==t.find((e=>e.length>1))){const n=t.map((t=>e.coder.getRoute(t.split(""))));return[e.coder.emitMapPattern(...n)]}return[e.coder.emitChooseUnitsPattern(t)]}{const t=n.sequence.map((e=>e.identity));if(t.length>3){const n=t.map((t=>e.coder.getRoute([t])));return[e.coder.emitMapPattern(...n)]}return[e.coder.emitChooseUnitsPattern(t)]}}{const r=t.resolve(e,n.left,a);if(void 0!==r){const o=t.resolve(e,n.right,a);if(void 0!==o)return[...r,...o]}}}},t.consume=(e,n,r)=>{const o=t.resolve(e,n,r);if(void 0!==o)return o.length>1?e.coder.emitChoosePattern(...o):o[0]}},6490:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n)=>{const o=r.resolve(e,t.right,n);if(void 0!==o)return e.coder.emitPivotPattern(n.identity,o[0],...o.slice(1))}},2914:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n,o)=>{const s=r.resolve(e,t.right,n);if(void 0!==s)return e.coder.emitPlacePattern(o,...s)}},8253:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n,o)=>{const s=r.resolve(e,t.right,n);if(void 0!==s)return e.coder.emitPrependPattern(n.identity,o,s[0],...s.slice(1))}},3445:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(3440),o=n(3772);t.consume=(e,t,n)=>{if(2===n.type)return void e.errors.push(new r.Error(t.fragment,4100));const s=o.extract(t.left.fragment.data),a=o.extract(t.right.fragment.data);return e.coder.emitRangePattern(s,a)}},7698:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(3440),o=(n(2536),n(4909));t.consume=(e,t,n)=>{const s=t.fragment.data,a=t.table?.get(s);if(void 0!==a)switch(n.type){case 1:return((e,t,n,r)=>{if(300===r.value||303===r.value){const r=t.fragment.data;if(n.pointers.has(r))return e.coder.emitReferencePattern(e.tokenPointerEntries,r);const o=e.tokenEntries.get(r);return void 0!==o&&e.tokenPointerEntries.add(0,r,o.identity,o.pattern),n.pointers.add(r),e.coder.emitReferencePattern(e.tokenPointerEntries,r)}})(e,t,n,a);case 2:return((e,t,n,r)=>{if(t instanceof o.Node)return e.coder.emitExpectUnitsPattern([t.identity]);if(301===r.value||302===r.value){const r=t.fragment.data;if(n.pointers.has(r))return e.coder.emitReferencePattern(e.nodePointerEntries,r);const o=e.nodeEntries.get(r);return void 0!==o&&e.nodePointerEntries.add(0,r,o.identity,o.pattern),n.pointers.add(r),e.coder.emitReferencePattern(e.nodePointerEntries,r)}})(e,t,n,a);case 0:return((e,t,n,r)=>{if(303===r.value){const r=t.fragment.data;if(n.pointers.has(r))return e.coder.emitReferencePattern(e.tokenPointerEntries,r);const o=e.tokenEntries.get(r);return void 0!==o&&e.tokenPointerEntries.add(0,r,o.identity,o.pattern),n.pointers.add(r),e.coder.emitReferencePattern(e.tokenPointerEntries,r)}})(e,t,n,a)}e.errors.push(new r.Error(t.fragment,4101))}},1056:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n)=>{const o=r.resolve(e,t.right,n);if(void 0!==o)return e.coder.emitRepeatPattern(...o)}},8040:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n)=>{const o=r.resolve(e,t.right,n);if(void 0!==o)return e.coder.emitScopePattern(...o)}},4940:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n)=>{const o=t.right,s=r.resolve(e,o.right,n);if(void 0!==s){const t=parseInt(o.fragment.data);return e.coder.emitSetPattern(t,...s)}}},6749:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(354);t.consume=(e,t,n)=>{const o=t.identity,s={type:0,identity:o,pointers:n},a=r.consume(e,t.right,s);void 0!==a&&e.skipEntries.add(0,`@SKIP${o}`,o,a)}},2862:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(3440),o=n(3772);t.consume=(e,t,n)=>{if(2===n.type)return void e.errors.push(new r.Error(t.fragment,4100));const s=o.extract(t.fragment.data).split("");return e.coder.emitExpectUnitsPattern(s)}},1594:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(2735);t.consume=(e,t,n)=>{const o=r.resolve(e,t.right,n);if(void 0!==o)return e.coder.emitSymbolPattern(n.identity,o[0],...o.slice(1))}},9548:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(354),o=(e,t,n,r,o,s)=>{if(s){const s=e.coder.emitReferencePattern(e.tokenPointerEntries,n);e.tokenPointerEntries.add(0,n,r,o),e.tokenEntries.add(t,n,r,s)}else e.tokenEntries.add(t,n,r,o)};t.consume=(e,t,n,s)=>{const a=t.identity,u={type:1,identity:a,pointers:n},i=r.consume(e,t.right,u);if(void 0!==i){const r=t.fragment.data,u=n.has(r);if(s)o(e,1,r,a,i,u);else{const t=e.coder.emitTokenPattern(a,i);o(e,0,r,a,t,u)}}}},6017:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consumeNodes=void 0,n(3440),n(2536);const r=n(8512),o=n(1354),s=n(9411);t.consumeNodes=(e,t)=>{let n=t.options.initialIdentity??0;const a={};for(;void 0!==e.next;){const u=e.next,i={type:0,entry:e,references:a,identity:n};if(231===u.value)r.consume(t,2,e,i);else{const e=u.right;switch(i.identity=(e.left?parseInt(e.left?.fragment.data):NaN)||n,u.value){case 232:o.consume(t,1,u,i,!1);break;case 233:s.consume(t,1,u,i,!1);break;case 234:o.consume(t,1,u,i,!0);break;case 235:s.consume(t,1,u,i,!0)}}n=i.identity+1,e=e.next}return 0===t.errors.length}},6658:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;const r=n(3440);class o extends r.Node{constructor(e){super(e.fragment,e.table,e.value),this.setChild(0,e.left),this.setChild(1,e.right),this.setChild(2,e.next)}get value(){return super.value}}t.Node=o},5814:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;const r=n(4909);class o extends r.Node{#alias;constructor(e,t,n){super(e,t),this.#alias=n}get alias(){return this.#alias}get name(){return this.fragment.data}}t.Node=o},4909:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;const r=n(6658);class o extends r.Node{#identity;constructor(e,t){super(e),this.#identity=t}get identity(){return this.#identity}}t.Node=o},2114:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;const r=n(6658);class o extends r.Node{#type;#getNodes(e){return this.value===e.value?[...this.#getNodes(e.left),...this.#getNodes(e.right)]:[e]}constructor(e,t){super(e),this.#type=t}get type(){return this.#type}get sequence(){return this.#getNodes(this)}}t.Node=o},3399:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0,n(3440),n(2536);const r=n(8888),o=n(8587),s=n(6459),a=n(11);t.consume=(e,n,u,i)=>{const c=u.getChild(n);switch(c.value){case 204:case 205:a.consume(e,n,u,i);break;case 201:r.consume(e,n,u,i);break;case 203:s.consume(e,n,u,i);break;case 208:o.consume(e,n,u,208,i);break;case 209:o.consume(e,n,u,209,i);break;default:t.consume(e,1,c,i)}}},8587:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0,n(3440),n(2536);const r=n(4909),o=n(2114),s=n(3399),a=(e,t)=>e.value===t?a(e.left,t)&&a(e.right,t):203===e.value,u=(e,t)=>e.value===t?u(e.left,t)&&u(e.right,t):e instanceof r.Node;t.consume=(e,t,n,r,i)=>{const c=n.getChild(t);c.value!==r?s.consume(e,t,n,i):3===i.type?(s.consume(e,0,c,i),s.consume(e,1,c,i),u(c,r)&&n.setChild(t,new o.Node(c,201))):a(c,r)?n.setChild(t,new o.Node(c,203)):(s.consume(e,0,c,i),s.consume(e,1,c,i))}},9411:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0,n(3440);const r=n(5814),o=n(3399);t.consume=(e,t,n,s,a)=>{const u=n.getChild(t),i={type:0,identity:s.identity,identifier:u.fragment.data},c=s.type;s.type=3,o.consume(e,1,u,s),n.setChild(t,new r.Node(u,i.identity,a)),s.references[i.identifier]=i,s.type=c}},11:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(3440),o=n(7636),s=n(3399),a=n(1354);t.consume=(e,t,n,u)=>{if(3===u.type){const i=n.getChild(t),c=`${i.left.fragment.data}-${i.right.fragment.data}`;let l=u.references[c];if(void 0!==l)0===l.type&&e.errors.push(new r.Error(i.fragment,4108));else{const t=o.getToken("@REF"+ ++u.identity,i.table,i.fragment.location,i);a.consume(e,1,t,u,!1),t.setChild(2,u.entry.next),u.entry.setChild(2,t),u.entry=t,l=u.references[c]}const d=o.getReference(l.identifier,i.table,i.fragment.location);n.setChild(t,d),s.consume(e,t,n,u)}}},8888:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(3440),o=(n(2536),n(4909));t.consume=(e,t,n,s)=>{const a=n.getChild(t),u=a.table?.get(a.fragment.data);if(u)switch(s.type){case 2:((e,t,n)=>{300!==n.value&&303!==n.value&&(301===n.value?e.errors.push(new r.Error(t.fragment,4103)):302===n.value?e.errors.push(new r.Error(t.fragment,4105)):e.errors.push(new r.Error(t.fragment,4102)))})(e,a,u);break;case 3:((e,t,n,s,a)=>{if(301!==a.value&&302!==a.value){const u=n.getChild(t);if(300===a.value){const a=u.fragment.data,i=s.references[a];void 0!==i?n.setChild(t,new o.Node(u,i.identity)):e.errors.push(new r.Error(u.fragment,4107))}else 303===a.value?e.errors.push(new r.Error(u.fragment,4106)):e.errors.push(new r.Error(u.fragment,4102))}})(e,t,n,s,u);break;case 1:((e,t,n,o)=>{303!==o.value&&(300===o.value?e.errors.push(new r.Error(t.fragment,4104)):301===o.value?e.errors.push(new r.Error(t.fragment,4103)):302===o.value?e.errors.push(new r.Error(t.fragment,4105)):e.errors.push(new r.Error(t.fragment,4102)))})(e,a,0,u)}else e.errors.push(new r.Error(a.fragment,4101))}},8512:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0,n(3440);const r=n(5814),o=n(3399);t.consume=(e,t,n,s)=>{const a=n.getChild(t),u=s.identity,i=s.type;s.type=1,o.consume(e,1,a,s),n.setChild(t,new r.Node(a,u,!1)),s.type=i}},6459:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(3440),o=n(7636),s=n(3399),a=n(1354);t.consume=(e,t,n,u)=>{if(3===u.type){const i=n.getChild(t),c=i.fragment.data;let l=u.references[c];if(void 0!==l)0===l.type&&e.errors.push(new r.Error(i.fragment,4108));else{const t=o.getToken("@REF"+ ++u.identity,i.table,i.fragment.location,i);a.consume(e,1,t,u,!1),t.setChild(2,u.entry.next),u.entry.setChild(2,t),u.entry=t,l=u.references[c]}const d=o.getReference(l.identifier,i.table,i.fragment.location);n.setChild(t,d),s.consume(e,t,n,u)}}},1354:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=void 0;const r=n(3440),o=(n(2536),n(5814)),s=n(3399),a=n(11),u=n(6459),i=(e,t,n,o,s)=>{const a=n.references[o];if(void 0!==a)1!==a.type&&e.errors.push(new r.Error(t.fragment,4108));else{const e=t.fragment.data;n.references[e]=s,n.references[o]=s}};t.consume=(e,t,n,r,c)=>{const l=n.getChild(t),d=l.right,f=r.type,p={type:3===f?1:0,identity:r.identity,identifier:l.fragment.data};if(r.type=2,203===d.value){u.consume(e,1,l,r);const t=l.right.fragment.data;i(e,l,r,t,p)}else if(205===d.value){a.consume(e,1,l,r);const t=d.left.fragment.data,n=d.right.fragment.data;i(e,l,r,`${t}-${n}`,p)}else s.consume(e,1,l,r),r.references[p.identifier]=p;n.setChild(t,new o.Node(l,p.identity,c)),r.type=f}},7636:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReference=t.getToken=t.getIdentifier=t.getIdentity=void 0;const r=n(3440);n(2536),t.getIdentity=(e,t,n)=>{const o=new r.Fragment(e,0,e.length,n);return new r.Node(o,t,202)},t.getIdentifier=(e,n,o)=>{const s=e.substr(4),a=new r.Fragment(e,0,e.length,o),u=new r.Node(a,n,200),i=new r.Record(a,u,300);return u.setChild(0,t.getIdentity(s,n,o)),n.add(i),u},t.getToken=(e,n,o,s)=>{const a=new r.Fragment("token",0,5,o),u=new r.Node(a,n,232),i=t.getIdentifier(e,n,o);return i.setChild(1,s),u.setChild(1,i),u},t.getReference=(e,t,n)=>{const o=new r.Fragment(e,0,e.length,n);return new r.Node(o,t,201)}},2536:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consume=t.consumeTokens=void 0;const r=n(3440),o=n(8608);t.consumeTokens=(e,t)=>{const n=new r.TokenSource(e,t);if(!o.Program.consume(n)){const o=e[n.longestState.offset]?.fragment??n.fragment;return t.errors.push(new r.Error(o,4098)),!1}return!0},t.consume=e=>o.Program.consume(e)},6284:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3440);class o extends r.Pattern{#pattern;constructor(e,t){super(),this.#pattern=new r.ExpectFlowPattern(t,new r.OptFlowPattern(new r.RepeatFlowPattern(new r.PivotNodePattern(r.BaseSource.Output,1,0,e,t))))}consume(e){return this.#pattern.consume(e)}}t.default=o},8552:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3440);n(5987);class o extends r.Pattern{#pattern;constructor(e,t,n){super(),this.#pattern=new r.ExpectFlowPattern(new r.OptFlowPattern(t),new r.EmitSymbolPattern(e,new r.PivotNodePattern(200,1,0,new r.ExpectUnitPattern(100)),new r.ExpectUnitPattern(129),new r.PlaceNodePattern(1,n)))}consume(e){return this.#pattern.consume(e)}}t.default=o},7713:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3440);class o extends r.Pattern{#pattern;constructor(e,t){super(),this.#pattern=new r.ExpectFlowPattern(new r.OptFlowPattern(new r.RepeatFlowPattern(new r.AppendNodePattern(r.BaseSource.Output,1,1,e))),t)}consume(e){return this.#pattern.consume(e)}}t.default=o},8608:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Program=void 0;const r=n(3440),o=(n(5987),n(8552)),s=n(6284),a=n(7713),u=new r.ExpectFlowPattern(new r.ExpectUnitPattern(133),new r.AppendNodePattern(202,0,1,new r.ExpectUnitPattern(101),new r.ExpectUnitPattern(134))),i=new r.MapFlowPattern(new r.SetValueRoute(210,110),new r.SetValueRoute(211,111),new r.SetValueRoute(212,112),new r.SetValueRoute(216,113),new r.SetValueRoute(225,116),new r.SetValueRoute(220,114),new r.SetValueRoute(224,115),new r.SetValueRoute(213,113,117),new r.SetValueRoute(217,114,117),new r.SetValueRoute(221,115,117),new r.SetValueRoute(214,113,118),new r.SetValueRoute(218,114,118),new r.SetValueRoute(222,115,118),new r.SetValueRoute(215,113,119),new r.SetValueRoute(219,114,119),new r.SetValueRoute(223,115,119),new r.SetValueRoute(226,120),new r.SetValueRoute(227,121),new r.SetValueRoute(228,u,122),new r.SetValueRoute(229,u,123),new r.SetValueRoute(230,u,124)),c=new r.PlaceNodePattern(1,new r.ExpectUnitPattern(104),new r.AppendNodePattern(203,1,1,new r.ExpectUnitPattern(102)),new r.PivotNodePattern(205,1,0,new r.ExpectUnitPattern(105),new r.AppendNodePattern(203,1,1,new r.ExpectUnitPattern(102)))),l=new r.AppendNodePattern(r.BaseSource.Output,1,1,new r.MapFlowPattern(new r.SetValueRoute(204,103),new r.SetValueRoute(203,102),new r.SetValueRoute(201,100))),d=new r.PlaceNodePattern(1,new r.ExpectFlowPattern(new r.ExpectUnitPattern(131),new r.RunFlowPattern((()=>p)),new r.ExpectUnitPattern(132))),f=new r.OptFlowPattern(new r.PivotNodePattern(206,1,0,new r.ExpectUnitPattern(106),new r.RunFlowPattern((()=>p)),new r.OptFlowPattern(new r.PivotNodePattern(207,1,0,new r.ExpectUnitPattern(107),new r.RunFlowPattern((()=>p)))))),p=new r.ExpectFlowPattern(new s.default(new r.MapFlowPattern(new r.SetValueRoute(208,108)),new s.default(new r.MapFlowPattern(new r.SetValueRoute(209,109)),new a.default(i,new r.ChooseFlowPattern(c,l,d)))),f),m=new r.SetValueRoute(231,p,125),h=new r.SetValueRoute(232,new o.default(300,u,p),126),P=new r.SetValueRoute(233,new o.default(301,u,p),127),g=new r.SetValueRoute(234,new o.default(303,u,p),128,126),w=new r.SetValueRoute(235,new o.default(302,u,p),128,127);t.Program=new r.ExpectFlowPattern(new r.OptFlowPattern(new r.RepeatFlowPattern(new r.ChooseFlowPattern(new r.EmitNodePattern(r.BaseSource.Output,1,new r.MapFlowPattern(m,h,P,g,w),new r.ExpectUnitPattern(130))))),new r.EndFlowPattern)},5747:e=>{e.exports=require("fs")},4147:e=>{e.exports=JSON.parse('{"name":"@xcheme/cli","version":"0.0.2","description":"Command Line Interface.","license":"MIT","keywords":["xcheme","lang","cli"],"repository":{"type":"git","url":"git+https://github.com/balmanth/xcheme.git","directory":"packages/cli"},"main":"bin/xcm.js","bin":{"xcm":"./bin/xcm.js"},"scripts":{"prepublishOnly":"npm run package","clean":"tsc --build --clean ./tsconfig.json","build":"webpack","watch":"webpack --watch","package":"webpack --mode production --devtool hidden-source-map"},"devDependencies":{"ts-loader":"^9.2.5","typescript":"^4.3.5","webpack":"^5.51.1","webpack-cli":"^4.8.0","webpack-shebang-plugin":"^1.1.6"},"dependencies":{"@xcheme/core":"^0.0.2","@xcheme/lang":"^0.0.2"}}')}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0});const t=n(4627),o=n(2793),s=n(4124),a=n(4247);try{const e=t.getFlags(process.argv.slice(2));if(e.help)o.print();else if(e.version)s.print();else{const t=e.source?e.source:0,n=e.target?e.target:1;a.perform(t,n,!!e.run,e.debug)}}catch(e){console.log(e.message??e)}})(),module.exports=r})();